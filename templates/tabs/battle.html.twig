{% extends 'homepage.html.twig' %}

{% block battle_tab %}
    <li class="tab" ><a class="current" href="{{ path('app_battle') }}">Battle<span class="sr-only"></span></a></li>
{% endblock %}

{% block sub_tabs %}

    <ul class="sub_tabs">
        <li class="sub_tab current" data-url="battle/findgame" onclick="getDynamicTabContent(this)">Find Game</li> {# Find Game is default current sub-tab #}
        <li class="sub_tab" data-url="battle/leaderboard" onclick="getDynamicTabContent(this)">Leaderboard</li>
    </ul>
{% endblock %}

{% block dynamic_container %}


    <div>
        <div class="search_player rounded">
            Find players here
            {#{{ dump(user) }}#}
            {#{% for user in users %}#}
            {#<li class="player_list">{{ user.username }}</li>#}
            {#{% endfor %}#}

            {% for user_stat in stat  %}
                <ul class="player_list">
                    {#<li onclick="sendRequest(this)">{{ user_stat.user}} <br> Rank: {{ user_stat.userRank }} Level: {{ user_stat.userLevel }}</li>#}
                    <li data-toggle="modal" data-target="#playerModal" data-name="{{ user_stat.user}}" onclick="showPlayerPopup(this)"><div class="li_lvl">{{ user_stat.userLevel }}</div>{{ user_stat.user}}<div class="li_rank">{{ user_stat.userRank }}</div></li>
                </ul>


            {% endfor %}
        </div>

        <div class = "requests rounded">
            <h3 style="text-align: center">Requests</h3>
            <nav style="margin-left: 1%; margin-right: 1%" class="">

                <div class="w3-bar w3-black">
                    <li class="w3-bar-item w3-button" onclick="requestTabs('Received')">Received</li>
                    <li class="w3-bar-item w3-button" onclick="requestTabs('Sent')">Sent</li>
                </div>

                <div id="Received" class="w3-container request_tab">
                    <h2>Received</h2>
                </div>

                <div id="Sent" class="w3-container request_tab" style="display:none">
                    <h2>Sent</h2>
                </div>

            </nav>

            {% for user_stat in stat %}
                <ul class="player_list">
                    <li>{{ user_stat.userRank }}</li>
                </ul>
            {% endfor %}

        </div>

        <!-- The Modal -->
        <div class="modal" id="playerModal">
            <div class="modal-dialog" style="max-width: none; width: 40%;">
                <div class="modal-content custom">

                    <!-- Modal Header -->
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>

                    <!-- Modal body -->
                    <div class="modal-body">
                    </div>

                    <!-- Modal footer -->
                    <div class="modal-footer">
                        <label id="request_error" style="color: red"></label>
                        <button id="requestButton" data-name="" type="button" class="btn btn-normal" onclick="beginRequest(this);" >Loading...</button>
                    </div>

                </div>
            </div>
        </div>

    </div>


{% endblock %}
