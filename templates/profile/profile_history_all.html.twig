{% import "macros/battle_history_all.html.twig" as macros %}

{% for battle in battles %}

     {#Get Winner#}
    {% if battle.winner == app.user %}
        {% set result = 'WIN' %}
    {% else %}
        {% set result = 'LOSE' %}
    {% endif %}

     {#Get Opponent #}
    {% if battle.request.attacker == app.user %}
        {% set opponent = battle.request.defender %}
    {% else %}
        {% set opponent = battle.request.attacker %}
    {% endif %}

    {{ macros.battleHistoryAll(battle, opponent, result) }}
{% endfor %}